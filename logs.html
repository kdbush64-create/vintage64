<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Vintage64TX | System Logs &mdash; Field Reports &amp; Project Notes</title>
    <meta name="description" content="Vintage64TX System Logs — field reports, project notes, and tech observations from DeWayne Bush. Fort Worth, TX tech professional.">
    <meta name="author" content="DeWayne Bush">
    <meta name="robots" content="index, follow">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">

    <!-- Canonical -->
    <link rel="canonical" href="https://vintage64tx.com/logs.html">

    <!-- Open Graph -->
    <meta property="og:title" content="Vintage64TX System Logs | Field Reports &amp; Project Notes">
    <meta property="og:description" content="Field reports, project notes, and tech observations from Vintage64TX. Fort Worth, TX.">
    <meta property="og:image" content="https://vintage64tx.com/logo.webp">
    <meta property="og:url" content="https://vintage64tx.com/logs.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Vintage64TX">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Vintage64TX System Logs">
    <meta name="twitter:description" content="Field reports, project notes, and tech observations from Vintage64TX. Fort Worth, TX.">
    <meta name="twitter:image" content="https://vintage64tx.com/logo.webp">

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="favicon-64.png">
    <link rel="apple-touch-icon" href="favicon-64.png">

    <link rel="stylesheet" href="style.css">
    <style>
        .skip-link {
            position: absolute;
            top: -100px;
            left: 10px;
            background: var(--accent);
            color: #000;
            padding: 8px 16px;
            font-weight: bold;
            z-index: 99999;
            transition: top 0.2s;
        }
        .skip-link:focus { top: 0; }
        .footer-social { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .footer-social a { color: var(--secondary); text-decoration: none; font-weight: bold; font-size: 0.85rem; }
        .footer-social a:hover { color: var(--accent); }
        .log-entry h2 { color: var(--accent); }
    </style>

    <!-- marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body id="page-logs">
    <div class="terminal-overlay"></div>
    <a href="#main" class="skip-link">Skip to main content</a>

    <div class="container">
        <div class="theme-switch-wrapper">
            <button id="theme-toggle" aria-label="Toggle between light and dark mode">TOGGLE_VISUAL_MODE</button>
        </div>

        <header style="text-align: center;">
            <div class="logo-container">
                <img src="logo.webp" alt="Vintage64TX Logo" class="main-logo" loading="lazy">
            </div>
            <h1 style="line-height: 1.2; text-align: center; margin: 0 auto 20px auto; display: inline-block;">
                <span style="display: block;">VINTAGE64TX</span>
                <span style="display: block; font-weight: normal; font-size: 0.8em; color: var(--primary); opacity: 0.9;">SYSTEM LOGS</span>
            </h1>
            <nav class="system-nav" aria-label="Main navigation">
                <a href="index.html">[ HOME ]</a>
                <a href="business.html">[ BUSINESS ]</a>
                <a href="logs.html" aria-current="page">[ LOGS ]</a>
                <a href="contact.html">[ CONTACT ]</a>
            </nav>
        </header>

        <main id="main">
            <div id="log-container" aria-live="polite">
                <p class="blink">SCANNING_FOR_LOG_FILES...</p>
            </div>
        </main>

        <footer>
            <div class="footer-status">
                <!-- Social links — replace PLACEHOLDER_* with real URLs when pages are live -->
                <div class="footer-social">
                    <a href="PLACEHOLDER_FACEBOOK_URL" target="_blank" rel="noopener noreferrer" aria-label="Vintage64TX on Facebook">[FACEBOOK]</a>
                    <a href="PLACEHOLDER_X_URL" target="_blank" rel="noopener noreferrer" aria-label="Vintage64TX on X">[X]</a>
                    <a href="PLACEHOLDER_INSTAGRAM_URL" target="_blank" rel="noopener noreferrer" aria-label="Vintage64TX on Instagram">[INSTAGRAM]</a>
                    <a href="PLACEHOLDER_GOOGLE_BUSINESS_URL" target="_blank" rel="noopener noreferrer" aria-label="Vintage64TX on Google Business">[GOOGLE]</a>
                </div>
                <p style="font-size: 0.75em; opacity: 0.7; margin-top: 15px; border-top: 1px dashed rgba(0,255,0,0.2); padding-top: 10px;">
                    SYSTEM_VER: 1.0.2-BETA | STATUS: <span style="color: #00ff00;">STABLE</span> | LAST_UPDT: <span id="last-update">FETCHING...</span>
                </p>
                <p style="font-size: 0.7em; opacity: 0.5;">&copy; 2026 VINTAGE64TX // ALL RIGHTS RESERVED</p>
            </div>
        </footer>
    </div>

    <!-- Cloudflare Web Analytics -->
    <script defer src="https://static.cloudflare.com/beacon.min.js" data-cf-beacon='{"token": "PLACEHOLDER_CF_ANALYTICS_TOKEN"}'></script>

    <script>
        // 1. THEME TOGGLE
        const toggleBtn = document.getElementById('theme-toggle');
        if (localStorage.getItem('theme') === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
        }
        toggleBtn.addEventListener('click', () => {
            const newTheme = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });

        // 2. GITHUB LAST UPDATE
        async function fetchLastUpdate() {
            try {
                const r = await fetch('https://api.github.com/repos/kdbush64-create/vintage64/commits/main');
                const data = await r.json();
                document.getElementById('last-update').textContent = new Date(data.commit.author.date).toISOString().split('T')[0];
            } catch {
                document.getElementById('last-update').textContent = "2026-02-11";
            }
        }
        fetchLastUpdate();

        // 3. DATA-BLUE HIGHLIGHTER
        function highlightLogLabels(targetElement) {
            const keywords = [
                "LOG_DATE:", "STATUS:", "SUMMARY:", "PROJECT:",
                "MILESTONE:", "COMPLETED:", "PENDING:", "VIGILANCE:", "INTEL_TYPE:"
            ];
            const walk = document.createTreeWalker(targetElement, NodeFilter.SHOW_TEXT, null, false);
            let node;
            const nodes = [];
            while (node = walk.nextNode()) {
                keywords.forEach(kw => { if (node.nodeValue.includes(kw)) nodes.push({node, kw}); });
            }
            nodes.forEach(({node, kw}) => {
                const parent = node.parentNode;
                if (parent.closest('.highlight-blue')) return;
                const parts = node.nodeValue.split(kw);
                const frag = document.createDocumentFragment();
                parts.forEach((part, i) => {
                    frag.appendChild(document.createTextNode(part));
                    if (i < parts.length - 1) {
                        const span = document.createElement('span');
                        span.className = 'highlight-blue';
                        span.textContent = kw;
                        frag.appendChild(span);
                    }
                });
                parent.replaceChild(frag, node);
            });
        }

        // 4. LOG FETCHING
        async function loadLogs() {
            const container = document.getElementById('log-container');
            const user = "kdbush64-create";
            const repo = "vintage64";

            try {
                const response = await fetch(`https://api.github.com/repos/${user}/${repo}/contents/business-logs`);
                const files = await response.json();

                if (!Array.isArray(files) || files.length === 0) {
                    container.innerHTML = '<p>&gt; NO_LOGS_FOUND // UPLINK_EMPTY</p>';
                    return;
                }

                container.innerHTML = '';
                const mdFiles = files.filter(f => f.name.endsWith('.md')).reverse();

                for (let file of mdFiles) {
                    const res = await fetch(file.download_url);
                    const content = await res.text();

                    // Anchor ID = filename without .md extension
                    // This makes logs.html#2026-02-19-solopreneur-manifesto work
                    const anchorId = file.name.replace(/\.md$/, '');

                    let displayTitle = '';
                    let displayDate = '';
                    let body = content;

                    // Check for proper YAML frontmatter (--- block at very top)
                    const fmMatch = content.match(/^\s*---\n([\s\S]*?)\n---\n?([\s\S]*)$/);
                    if (fmMatch) {
                        const header = fmMatch[1];
                        body = fmMatch[2];
                        const tMatch = header.match(/^title:\s*(.+)$/m);
                        const dMatch = header.match(/^date:\s*(.+)$/m);
                        if (tMatch) displayTitle = tMatch[1].trim();
                        if (dMatch) displayDate = dMatch[1].trim();
                    } else {
                        // No YAML frontmatter — extract from markdown content directly
                        // Pull title from first # heading line
                        const h1Match = content.match(/^#\s+(.+)$/m);
                        // Pull date from **DATE:** line
                        const dateMatch = content.match(/\*\*DATE:\*\*\s*(.+)/);
                        if (h1Match) displayTitle = h1Match[1].trim();
                        if (dateMatch) displayDate = dateMatch[1].trim();
                        // Use full content as body — marked handles --- as <hr>
                        body = content;
                    }

                    // Fallback: derive title from filename if nothing found
                    if (!displayTitle) {
                        displayTitle = anchorId
                            .replace(/^\d{4}-\d{2}-\d{2}-/, '')
                            .replace(/-/g, ' ')
                            .toUpperCase();
                    }

                    const entry = document.createElement('section');
                    entry.className = 'log-entry';
                    entry.id = anchorId;
                    entry.style.marginBottom = '40px';
                    entry.style.scrollMarginTop = '20px';
                    entry.innerHTML = `
                        <h2>&gt; ${displayTitle}</h2>
                        ${displayDate ? `<p><strong>LOG_DATE:</strong> ${displayDate}</p>` : ''}
                        <div class="log-text" style="line-height: 1.6;">${marked.parse(body)}</div>
                        <hr style="border: 0; border-top: 1px dashed var(--border); margin: 20px 0;">
                    `;
                    highlightLogLabels(entry);
                    container.appendChild(entry);
                }

                // Scroll to anchor after all logs are rendered
                if (window.location.hash) {
                    const target = document.querySelector(window.location.hash);
                    if (target) {
                        setTimeout(() => target.scrollIntoView({ behavior: 'smooth' }), 150);
                    }
                }

            } catch (e) {
                container.innerHTML = '<p>&gt; ERROR: UPLINK_FAILURE // CHECK_REPOSITORY_PATH</p>';
                console.error(e);
            }
        }

        loadLogs();
    </script>
</body>
</html>

